# 🚀 게임 배포 및 구글 시트 연동 가이드

이 가이드는 '천로역정 퀴즈 게임'을 인터넷에 배포하고, 학생들의 점수를 담임목사님의 구글 시트로 자동으로 수집하는 방법을 설명합니다.

---

## 1단계: 구글 시트(점수판) 만들기

학생들이 게임을 완료하면 점수가 자동으로 기록될 엑셀(구글 시트)을 만듭니다.

1. [Google Sheets](https://sheets.google.com)에 접속하여 **새 스프레드시트**를 만듭니다.
2. 시트 이름을 `천로역정 게임 점수` 등으로 변경합니다.
3. 첫 번째 줄(1행)에 다음 헤더를 입력합니다:
   - **A1**: `이름`
   - **B1**: `점수`
   - **C1**: `날짜`

## 2단계: 구글 앱스 스크립트 설정

구글 시트가 게임에서 보낸 데이터를 받을 수 있도록 '앱스 스크립트'를 설정합니다.

1. 구글 시트 메뉴에서 **확장 프로그램** > **Apps Script**를 클릭합니다.
2. 코드 편집기가 열리면 기존 코드를 모두 지우고, 아래 코드를 복사해서 붙여넣습니다.

```javascript
function doPost(e) {
  try {
    // 게임에서 보낸 데이터 받기
    var data = JSON.parse(e.postData.contents);
    var name = data.name;
    var score = data.score;
    var date = data.date;
    
    // 시트에 기록하기
    var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
    sheet.appendRow([name, score, date]);
    
    // 성공 응답 보내기
    return ContentService.createTextOutput(JSON.stringify({"result":"success"}))
      .setMimeType(ContentService.MimeType.JSON);
      
  } catch(error) {
    // 에러 발생 시
    return ContentService.createTextOutput(JSON.stringify({"result":"error", "error": error}))
      .setMimeType(ContentService.MimeType.JSON);
  }
}
```

3. `Ctrl + S` (맥은 `Cmd + S`)를 눌러 저장합니다. 프로젝트 이름은 아무거나 해도 됩니다 (예: `ScoreReceiver`).

## 3단계: 웹 앱으로 배포하기 (중요!)

이 단계가 가장 중요합니다. 설정을 정확히 따라주세요.

1. 오른쪽 상단의 **배포** 버튼 > **새 배포**를 클릭합니다.
2. '유형 선택' 톱니바퀴를 눌러 **웹 앱**을 선택합니다.
3. 설정:
   - **설명**: `점수 수집기` (자유롭게 입력)
   - **다음 사용자 계정으로 실행**: `나(Me)` (변경하지 마세요)
   - **액세스 권한이 있는 사용자**: **`모든 사용자`** (반드시 이것으로 설정해야 학생들이 로그인 없이 점수를 보낼 수 있습니다)
4. **배포** 버튼을 클릭합니다.
5. '액세스 승인' 창이 뜨면 **권한 검토** > 본인 구글 계정 선택 > **고급** > **ScoreReceiver(으)로 이동(안전하지 않음)** > **허용**을 클릭합니다. (본인이 만든 스크립트이므로 안전합니다.)
6. **웹 앱 URL**이 생성됩니다. 이 주소(`https://script.google.com/...`)를 **복사**해둡니다.

## 4단계: 게임에 URL 연결하기

1. 게임 폴더의 [app.js](file:///Users/ohdeokwhan/.gemini/antigravity/scratch/pilgrim-progress-game/app.js) 파일을 엽니다.
2. 맨 윗부분에 있는 `GOOGLE_SCRIPT_URL` 변수를 찾습니다.
3. `"YOUR_GOOGLE_SCRIPT_URL_HERE"` 부분을 방금 복사한 웹 앱 URL로 바꿔줍니다.

```javascript
// 예시
const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx.../exec";
```

4. 파일을 저장합니다.

---

## 5단계: 게임 배포하기 (인터넷에 올리기)

이제 게임을 인터넷 주소로 접속할 수 있게 만들어봅시다. **GitHub Pages**나 **Netlify**를 추천합니다. 여기서는 가장 간편한 **Netlify Drop**을 소개합니다.

1. [Netlify Drop](https://app.netlify.com/drop) 사이트에 접속합니다. (로그인이 필요할 수 있습니다)
2. 컴퓨터에 있는 게임 폴더(`pilgrim-progress-game`) 전체를 드래그해서 브라우저 화면에 놓습니다.
3. 잠시 기다리면 배포가 완료되고, 인터넷 주소(URL)가 생성됩니다.
4. 이 주소를 학생들에게 카카오톡 등으로 공유하면 됩니다!

---

## ✅ 테스트 방법

1. 배포된 게임 주소로 접속합니다.
2. 게임을 끝까지 플레이하거나, 테스트를 위해 [app.js](file:///Users/ohdeokwhan/.gemini/antigravity/scratch/pilgrim-progress-game/app.js)에서 강제로 폼을 보이게 수정해서 테스트해봅니다.
3. 이름을 입력하고 '점수 보내기'를 누릅니다.
4. 구글 시트에 이름과 점수가 들어왔는지 확인합니다.

이제 모든 준비가 끝났습니다! 학생들과 즐겁게 게임을 즐기세요. 🎮
